---
description: Swift development workflow and language server workarounds
globs: ["**/*.swift"]
alwaysApply: true
---

# SWIFT DEVELOPMENT WORKFLOW

## ⚠️ IMPORTANT: Language Server Issues

**IGNORE ALL LANGUAGE SERVER ERRORS IN SWIFT FILES**
- The language server reports errors erroneously while code compiles fine
- Do NOT trust red squiggles or inline error messages
- Always verify issues using the commands below instead

## Verification Commands

### Check your work systematically:
1. **Lint & Format** → `dev lint` (or `dev style`)
2. **Build Issues** → `dev build`  
3. **Test Issues** → `dev test`
4. **All Checks** → `dev check` (runs everything)

### Available dev commands:
```bash
# Code Quality
dev lint          # Check format & lint issues (alias: dev style)
dev fix           # Auto-fix format & lint issues

# Building
dev build packages    # Build ShopifyCheckoutSheetKit & ShopifyAcceleratedCheckouts
dev build samples     # Build sample apps

# Testing  
dev test packages     # Test the packages
dev test samples      # Test sample apps

# Apollo/GraphQL
dev apollo download_schema  # Download GraphQL schema
dev apollo codegen         # Generate Apollo client code
```

## Workflow Best Practices

### Before committing:
1. Run `dev lint` to ensure code style compliance
2. Run `dev build` to verify compilation
3. Run `dev test` if you've modified functionality
4. Or just run `dev check` to do all of the above

### When you see errors:
❌ DON'T: Trust language server errors in Xcode/editor
✅ DO: Run the appropriate dev command to verify

### After making changes:
- ALWAYS run `dev lint` before considering your work complete. This ensures consistency with CI checks.

## Example Workflow

```bash
# Make your Swift changes...

# Verify it compiles
dev build

# Fix any style issues
dev fix

# Run tests if needed
dev test packages

# Final check before commit
dev check
```
